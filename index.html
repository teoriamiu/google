<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Sans Flex: Studio Pro</title>
    
    <script src="/js/sortable/sortable.min.js"></script>
    
    <style>
        @font-face {
            font-family: 'GSansFlex';
            src: url('/fonts/GoogleSansFlex.ttf') format('truetype');
            font-weight: 100 1000;
        }

        :root {
            --wght: 400; --wdth: 100; --opsz: 14; --GRAD: 0; --slnt: 0; --ROND: 0;
            --bg: #ffffff; 
            --panel: #f8f9fa; 
            --text: #202124;
            --border: #dadce0;
            --card-hover: #f1f3f4;
            --g-blue: #4285F4; --g-red: #EA4335; --g-yellow: #FBBC05; --g-green: #34A853;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --bg: #000000; --panel: #111111; --text: #e8eaed; --border: #3c4043; --card-hover: #202124;
            }
        }

        body {
            font-family: 'GSansFlex', sans-serif;
            background: var(--bg); color: var(--text);
            margin: 0; display: flex; height: 100vh; overflow: hidden;
            transition: background 0.3s ease;
        }

        .sidebar {
            width: 320px; background: var(--panel);
            padding: 24px; border-right: 1px solid var(--border);
            display: flex; flex-direction: column; gap: 15px;
            overflow-y: auto; z-index: 100;
        }

        h3 { font-size: 1rem; margin: 0 0 10px; font-weight: 700; letter-spacing: -0.02em; }

        .control-card {
            background: var(--bg); padding: 14px; border-radius: 12px;
            border: 1px solid var(--border); cursor: grab;
            transition: all 0.2s ease;
        }
        .control-card:hover { background: var(--card-hover); border-color: var(--text); }
        
        .label-row { display: flex; justify-content: space-between; font-size: 0.7rem; margin-bottom: 8px; font-weight: 800; color: var(--text); opacity: 0.6; }
        .val { color: var(--text); opacity: 1; }

        input[type="range"] { 
            width: 100%; accent-color: var(--text); -webkit-appearance: none; 
            background: var(--border); height: 2px; border-radius: 2px;
        }

        .main-content {
            flex: 1; display: flex; flex-direction: column; position: relative;
        }

        .preview-container {
            flex: 1; display: flex; align-items: center; justify-content: center;
            text-align: center; padding: 20px;
        }

        #main-text {
            font-size: clamp(3rem, 10vw, 8rem);
            font-variation-settings: 'wght' var(--wght), 'wdth' var(--wdth), 'opsz' var(--opsz), 'GRAD' var(--GRAD), 'slnt' var(--slnt), 'ROND' var(--ROND);
            outline: none; line-height: 1;
        }

        .g-b { color: var(--g-blue); }   .g-r { color: var(--g-red); }
        .g-y { color: var(--g-yellow); } .g-g { color: var(--g-green); }

        @media (max-width: 800px) {
            body { flex-direction: column; overflow-y: auto; height: auto; }
            .sidebar { width: auto; border-right: none; border-top: 1px solid var(--border); order: 2; height: auto; }
            .main-content { height: 60vh; order: 1; }
            #main-text { font-size: 15vw; }
        }
    </style>
</head>
<body>

    <aside class="sidebar">
        <h3>System Axes</h3>
        <div id="controls-list">
            <div class="control-card" data-id="wght">
                <div class="label-row"><span>WEIGHT</span> <span class="val" id="v-wght">400</span></div>
                <input type="range" id="wght" min="100" max="1000" value="400">
            </div>
            <div class="control-card" data-id="wdth">
                <div class="label-row"><span>WIDTH</span> <span class="val" id="v-wdth">100</span></div>
                <input type="range" id="wdth" min="25" max="151" value="100">
            </div>
            <div class="control-card" data-id="ROND">
                <div class="label-row"><span>ROUND</span> <span class="val" id="v-ROND">0</span></div>
                <input type="range" id="ROND" min="0" max="100" value="0">
            </div>
            <div class="control-card" data-id="GRAD">
                <div class="label-row"><span>GRADE</span> <span class="val" id="v-GRAD">0</span></div>
                <input type="range" id="GRAD" min="-200" max="150" value="0">
            </div>
            <div class="control-card" data-id="opsz">
                <div class="label-row"><span>OPTICAL</span> <span class="val" id="v-opsz">14</span></div>
                <input type="range" id="opsz" min="8" max="144" value="14">
            </div>
            <div class="control-card" data-id="slnt">
                <div class="label-row"><span>SLANT</span> <span class="val" id="v-slnt">0</span></div>
                <input type="range" id="slnt" min="-10" max="0" value="0">
            </div>
        </div>
    </aside>

    <main class="main-content">
        <div class="preview-container">
            <div id="main-text" contenteditable="true" spellcheck="false">
                <span class="g-b">G</span><span class="g-r">o</span><span class="g-y">o</span><span class="g-b">g</span><span class="g-g">l</span><span class="g-r">e</span>
                <div style="color: var(--text); font-size: 0.5em; opacity: 0.5;">Sans Flex</div>
            </div>
        </div>
    </main>

    <script>
        window.onload = () => {
            // Sortable con delay de 200ms
            if (typeof Sortable !== 'undefined') {
                Sortable.create(document.getElementById('controls-list'), { 
                    animation: 250,
                    ghostClass: 'sortable-ghost',
                    delay: 200,
                    delayOnTouchOnly: true
                });
            }

            // Sliders Logic
            document.querySelectorAll('input').forEach(input => {
                input.oninput = (e) => {
                    const val = e.target.value;
                    const id = e.target.id;
                    document.documentElement.style.setProperty(`--${id}`, val);
                    document.getElementById(`v-${id}`).innerText = val;
                };
            });
        };
    </script>
</body>
</html>